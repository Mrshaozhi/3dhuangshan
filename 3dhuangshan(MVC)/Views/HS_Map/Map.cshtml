
@{
    ViewBag.Title = "Index";
}

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>我的定位</title>
    <!--<link href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700" media="all" rel="stylesheet" type="text/css" />-->
    <link href="../stylesheets/bootstrap.min.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/font-awesome.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/se7en-font.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/isotope.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/jquery.fancybox.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/fullcalendar.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/wizard.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/select2.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/morris.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/datatables.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/datepicker.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/timepicker.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/colorpicker.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/bootstrap-switch.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/daterange-picker.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/typeahead.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/summernote.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/pygments.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/style.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/color/green.css" media="all" rel="alternate stylesheet" title="green-theme" type="text/css" />
    <link href="../stylesheets/color/orange.css" media="all" rel="alternate stylesheet" title="orange-theme" type="text/css" />
    <link href="../stylesheets/color/magenta.css" media="all" rel="alternate stylesheet" title="magenta-theme" type="text/css" />
    <link href="../stylesheets/color/gray.css" media="all" rel="alternate stylesheet" title="gray-theme" type="text/css" />
    <script src="../javascripts/jquery.min.js" type="text/javascript"></script>
    <script src="../javascripts/jquery-ui.js" type="text/javascript"></script>
    <script src="../javascripts/bootstrap.min.js" type="text/javascript"></script>
    <script src="../javascripts/raphael.min.js" type="text/javascript"></script>
    <script src="../javascripts/selectivizr-min.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.mousewheel.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.vmap.min.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.vmap.sampledata.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.vmap.world.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.bootstrap.wizard.js" type="text/javascript"></script>
    <script src="../javascripts/fullcalendar.min.js" type="text/javascript"></script>
    <script src="../javascripts/gcal.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="../javascripts/datatable-editable.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.easy-pie-chart.js" type="text/javascript"></script>
    <script src="../javascripts/excanvas.min.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.isotope.min.js" type="text/javascript"></script>
    <script src="../javascripts/isotope_extras.js" type="text/javascript"></script>
    <script src="../javascripts/modernizr.custom.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script src="../javascripts/select2.js" type="text/javascript"></script>
    <script src="../javascripts/styleswitcher.js" type="text/javascript"></script>
    <script src="../javascripts/wysiwyg.js" type="text/javascript"></script>
    <script src="../javascripts/summernote.min.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.inputmask.min.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.validate.js" type="text/javascript"></script>
    <script src="../javascripts/bootstrap-fileupload.js" type="text/javascript"></script>
    <script src="../javascripts/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="../javascripts/bootstrap-timepicker.js" type="text/javascript"></script>
    <script src="../javascripts/bootstrap-colorpicker.js" type="text/javascript"></script>
    <script src="../javascripts/bootstrap-switch.min.js" type="text/javascript"></script>
    <script src="../javascripts/typeahead.js" type="text/javascript"></script>
    <script src="../javascripts/daterange-picker.js" type="text/javascript"></script>
    <script src="../javascripts/date.js" type="text/javascript"></script>
    <script src="../javascripts/morris.min.js" type="text/javascript"></script>
    <script src="../javascripts/skycons.js" type="text/javascript"></script>
    <script src="../javascripts/fitvids.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.sparkline.min.js" type="text/javascript"></script>
    <script src="../javascripts/main.js" type="text/javascript"></script>
    <script src="../javascripts/respond.js" type="text/javascript"></script>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <style>
        #container1 {
            width: 100%;
            height: 730px;
        }

        .info {
            top: 90%;
            border: 1px solid #000000;
        }
    </style>

</head>
<body style="background:#ffffff">
    <div class="modal-shiftfix">
        <!-- Navigation -->
        <div class="navbar navbar-fixed-top scroll-hide">
            <div class="container-fluid top-bar">
                <div class="pull-right">
                    <ul class="nav navbar-nav pull-right">
                        <li class="dropdown settings hidden-xs">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <span aria-hidden="true" class="se7en-gear"></span>
                                <div class="sr-only">
                                    主题
                                </div>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a class="settings-link blue" href="javascript:chooseStyle('none', 30)"><span></span>天空蓝</a>
                                </li>
                                <li>
                                    <a class="settings-link green" href="javascript:chooseStyle('green-theme', 30)"><span></span>森林绿</a>
                                </li>
                                <li>
                                    <a class="settings-link orange" href="javascript:chooseStyle('orange-theme', 30)"><span></span>橘子黄</a>
                                </li>
                                <li>
                                    <a class="settings-link magenta" href="javascript:chooseStyle('magenta-theme', 30)"><span></span>罗兰紫</a>
                                </li>
                                <li>
                                    <a class="settings-link gray" href="javascript:chooseStyle('gray-theme', 30)"><span></span>星空灰</a>
                                </li>
                            </ul>
                        </li>
                        <li class="dropdown user hidden-xs">
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <img width="34" height="34" src="../images/avatar-male.jpg" />邵志<b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="#">
                                        <i class="icon-user"></i>我的账户
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="icon-gear"></i>我的消息
                                    </a>
                                </li>
                                <li>
                                    <a href="login1.html">
                                        <i class="icon-signout"></i>退出登陆
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <button class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="logo" href="index-2.html">se7en</a>
            </div>
            <div class="container-fluid main-nav clearfix">
                <div class="nav-collapse">
                    <ul class="nav">
                        <li>
                            <a href="../HS_3DMountain/3DMountain">
                                <span aria-hidden="true" class=" icon-globe"></span>3D黄山
                            </a>
                        </li>
                        <li>
                            <a href="../HS_Map/Map" class="current">
                                <span aria-hidden="true" class="icon-map-marker"></span>我的定位
                            </a>
                        </li>
                        <li>
                            <a href="../HS_Weather/Weather">
                                <span aria-hidden="true" class="icon-sun"></span>黄山天气
                            </a>
                        </li>
                        <li>
                            <a href="../HS_MapLoad/MapLoad">
                                <span aria-hidden="true" class="icon-folder-close-alt"></span>地图下载
                            </a>
                        </li>
                        <li class="dropdown">
                            <a data-toggle="dropdown" href="#">
                                <span aria-hidden="true" class="icon-plane"></span>攻略<b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../HS_Strategy/Strategy">浏览</a>
                                </li>
                                <li>
                                    <a href="../HS_Strategy/NewStrategy">编写</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="../HS_Photo/Photo">
                                <span aria-hidden="true" class="icon-camera-retro"></span>美景
                            </a>
                        </li>
                        <li>
                            <a href="../HS_About/About">
                                <span aria-hidden="true" class="icon-paper-clip"></span>关于
                            </a>
                        </li>
                        <li class="dropdown">
                            <a data-toggle="dropdown" href="#">
                                <span aria-hidden="true" class="icon-star-empty"></span>我自己<b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../HS_MySelf/Home">主页</a>
                                </li>
                                <li>
                                    <a href="../HS_MySelf/Calendar">便签</a>
                                </li>
                                <li>
                                    <a href="../HS_MySelf/FeedBack">信息反馈</a>
                                </li>
                            </ul>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <!-- End Navigation -->

        <div id="container1"></div>
        <div class="info">
            <p id='info' style="text-align:center"></p>
        </div>
        <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.10&key=5b7aaafc326fe33264df1926a0cfef80"></script>
        <script src="https://webapi.amap.com/maps?v=1.4.10&key=5b7aaafc326fe33264df1926a0cfef80&&plugin=AMap.Scale,AMap.OverView,AMap.ToolBar,AMap.CitySearch,AMap.ControlBar"></script>
        <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
        <script type="text/javascript">

            var toolBar = new AMap.ToolBar({
              visible: false
            }),
            scale = new AMap.Scale({
              visible: false
            }),
            map = new AMap.Map('container1', {
                resizeEnable: true,
                rotateEnable:true,
                pitchEnable:true,
                zoom: 11, //初始地图级别
                mapStyle: "amap://styles/fresh",

            });
            map.addControl(new AMap.ControlBar({
                showZoomBar:false,
                showControlButton:true,
                position:{
                    right:'5px',
                    top:'10px'
                }
            }))
            map.addControl(toolBar);
            map.addControl(scale);
            toolBar.show();
            scale.show();

            AMap.plugin('AMap.Geolocation', function() {
                var geolocation = new AMap.Geolocation({
                    enableHighAccuracy: true,//是否使用高精度定位，默认:true
                    timeout: 10000,          //超过10秒后停止定位，默认：5s
                    buttonPosition: 'RT',    //定位按钮的停靠位置
                    buttonOffset: new AMap.Pixel(33, 130),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
                    zoomToAccuracy: false,   //定位成功后是否自动调整地图视野到定位点

                });
                map.addControl(geolocation);
                geolocation.getCurrentPosition(function(status,result){
                    if (status == 'complete') {

                    }else{

                    }
                });
            });

            function showCityInfo() {
             //实例化城市查询类
                var citysearch = new AMap.CitySearch();
             //自动获取用户IP，返回当前城市
                citysearch.getLocalCity(function(status, result) {
                    if (status === 'complete' && result.info === 'OK') {
                        if (result && result.city && result.bounds) {
                            var cityinfo = result.city;
                            var citybounds = result.bounds;
                            document.getElementById('info').innerHTML = '您当前所在城市为：'+cityinfo;
                            //地图显示当前城市
                            map.setBounds(citybounds);
                        }
                    } else {
                        document.getElementById('info').innerHTML = result.info;
                    }
                });
            }
            showCityInfo();
            //点击添加Marker
            map.on('click', showInfoClick);
            function showInfoClick(e) {
                try {
                    map.remove(marker);
                    var a = e.lnglat.getLng() + ',' + e.lnglat.getLat();
                    marker = new AMap.Marker({
                        icon: "/images/poi-marker-default.png",
                        position: [e.lnglat.getLng(), e.lnglat.getLat()],
                        offset: new AMap.Pixel(-13, -30)
                    });
                    map.add(marker);
                }
                catch (error) {
                    var a = e.lnglat.getLng() + ',' + e.lnglat.getLat();
                    marker = new AMap.Marker({
                        icon: "/images/poi-marker-default.png",
                        position: [e.lnglat.getLng(), e.lnglat.getLat()],
                        offset: new AMap.Pixel(-13, -30)
                    });

                    map.add(marker);
                }
            }

            map.on("complete", function(){
            log.success("地图加载完成！");
            });
        </script>

    </div>

</body>

</html>

